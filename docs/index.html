<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Header-Only C++ and R Interface • cpp4r</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Header-Only C++ and R Interface">
<meta name="description" content="Provides a header only, C++ interface to R with enhancements over cpp11. Enforces copy-on-write semantics consistent with R behavior. Offers native support for ALTREP objects, UTF-8 string handling, modern C++11 features and idioms, and reduced memory requirements. Allows for vendoring, making it useful for restricted environments. Compared to cpp11, it adds support for converting C++ maps to R lists, Roxygen documentation directly in C++ code, proper handling of matrix attributes, support for nullable external pointers, bidirectional copy of complex number types, flexibility in type conversions, use of nullable pointers, and various performance optimizations.">
<meta property="og:description" content="Provides a header only, C++ interface to R with enhancements over cpp11. Enforces copy-on-write semantics consistent with R behavior. Offers native support for ALTREP objects, UTF-8 string handling, modern C++11 features and idioms, and reduced memory requirements. Allows for vendoring, making it useful for restricted environments. Compared to cpp11, it adds support for converting C++ maps to R lists, Roxygen documentation directly in C++ code, proper handling of matrix attributes, support for nullable external pointers, bidirectional copy of complex number types, flexibility in type conversions, use of nullable pointers, and various performance optimizations.">
<meta property="og:image" content="./logo.svg">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">cpp4r</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/01-motivations.html">01 - Motivations for cpp4r</a></li>
    <li><a class="dropdown-item" href="articles/02-setup.html">02 - Setup</a></li>
    <li><a class="dropdown-item" href="articles/03-package-skeleton.html">03 - Package Skeleton</a></li>
    <li><a class="dropdown-item" href="articles/04-read-only.html">04 - Read-only versus Writable R Objects</a></li>
    <li><a class="dropdown-item" href="articles/05-logical-functions.html">05 - Logical Functions</a></li>
    <li><a class="dropdown-item" href="articles/06-rolling-functions.html">06 - Rolling Functions</a></li>
    <li><a class="dropdown-item" href="articles/07-statistical-functions.html">07 - Statistical Functions</a></li>
    <li><a class="dropdown-item" href="articles/08-logical-functions-2.html">08 - Logical Functions with Missing Values</a></li>
    <li><a class="dropdown-item" href="articles/09-rolling-functions-2.html">09 - Rolling Functions with Missing Values</a></li>
    <li><a class="dropdown-item" href="articles/10-statistical-functions-2.html">10 - Statistical Functions with Missing Values</a></li>
    <li><a class="dropdown-item" href="articles/11-debugging.html">11 - Debugging R Packages</a></li>
    <li><a class="dropdown-item" href="articles/12-external-pointers.html">12 - External Pointers</a></li>
    <li><a class="dropdown-item" href="articles/13-compiler-optimization.html">13 - Compiler Optimizations</a></li>
    <li><a class="dropdown-item" href="articles/14-linear-algebra.html">14 - Linear Algebra</a></li>
    <li><a class="dropdown-item" href="articles/15-internals.html">15 - Internals</a></li>
    <li><a class="dropdown-item" href="articles/16-FAQ.html">17 - FAQs</a></li>
    <li><a class="dropdown-item" href="articles/17-worked-examples.html">16 - Worked Examples</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/pachadotdev/cpp4r/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.svg" class="logo" alt=""><h1 id="cpp4r-">cpp4r <a class="anchor" aria-label="anchor" href="#cpp4r-"></a>
</h1>
</div>
<!-- badges: start -->

<p>cpp4r helps you to interact with R objects using C++ code. It is a fork of the <a href="https://cran.r-project.org/package=cpp11">cpp11</a> package with identical syntax and similar goals.</p>
<p>cpp4r can be used as a replacement for cpp11 in existing or new packages. Think of cpp11 and cpp4r as MySQL and MariaDB: they are almost identical, but cpp4r has some extra features.</p>
<p>After discussing some <a href="https://github.com/pachadotdev/cpp11/pulls/pachadotdev">pull requests</a> with Hadley Wickham from Posit, it was mentioned that I should create my own fork to add the following features:</p>
<ul class="task-list">
<li><label><input type="checkbox" checked>Convert ordered and unordered C++ maps to R lists.</label></li>
<li><label><input type="checkbox" checked>Roxygen support on C++ side.</label></li>
<li><label><input type="checkbox" checked>Allow <code>dimnames</code> atribute with matrices on C++ side.</label></li>
<li><label><input type="checkbox" checked>Support nullable <code>external_ptr&lt;&gt;</code>.</label></li>
<li><label><input type="checkbox" checked>Use values added to a vector with <code>push_back()</code> immediately.</label></li>
<li><label><input type="checkbox" checked>Support bidirectional passing of complex numbers/vectors.</label></li>
<li><label><input type="checkbox" checked>Provide flexibility with data types (e.g., cpp4r’s <code>as_integers()</code> and <code>as_doubles()</code> accept logical inputs while cpp11’s do not).</label></li>
<li><label><input type="checkbox" checked>Some internal optimizations for better speed (e.g., <a href="https://github.com/r-lib/cpp11/pull/463" class="uri">https://github.com/r-lib/cpp11/pull/463</a> and <a href="https://github.com/r-lib/cpp11/pull/430" class="uri">https://github.com/r-lib/cpp11/pull/430</a>).</label></li>
</ul>
<div class="section level2">
<h2 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<p>Check the <a href="https://cpp4r.org/">documentation</a> to get started using cpp4r in your scripts, particularly if you are new to C++ programming.</p>
</div>
<div class="section level2">
<h2 id="using-cpp4r-in-a-package">Using cpp4r in a package<a class="anchor" aria-label="anchor" href="#using-cpp4r-in-a-package"></a>
</h2>
<p>Create a new package with <code>cpp4r::pkg_template("~/path/to/mypkg")</code> and then edit the generated files.</p>
<p>To add cpp4r to an existing package, put your C++ files in the <code>src/</code> directory and add the following to your DESCRIPTION file:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>LinkingTo<span class="sc">:</span> cpp4r</span></code></pre></div>
<p>Then add a roxygen header, for example, to <code>R/mypkg-package.R</code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @useDynLib mypkg, .registration = TRUE</span></span>
<span><span class="co">#' @keywords internal</span></span>
<span><span class="st">"_PACKAGE"</span></span></code></pre></div>
<p>Then decorate C++ functions you want to expose to R with <code>[[cpp4r::register]]</code>.</p>
<p>cpp4r is a header only library with no hard dependencies and does not use a shared library. It is straightforward and reliable to use in packages without fear of compile-time and run-time mismatches.</p>
</div>
<div class="section level2">
<h2 id="vendoring">Vendoring<a class="anchor" aria-label="anchor" href="#vendoring"></a>
</h2>
<p>You can <a href="https://cpp4r.org/articles/01-motivations.html">vendor</a> the current installed version of cpp4r headers into your package with <code><a href="reference/vendor.html">cpp4r::vendor()</a></code>.</p>
<p>The <a href="https://github.com/pachadotdev/cpp4r/tree/main/cpp4rtest">cpp4rvendor</a> package shows an example of vendoring cpp4r headers.</p>
<p>Vendoring ensures the headers will remain unchanged until you explicitly update them. The advantage is that your package will not break if there are breaking changes in future versions of cpp4r. The disadvantage is that you will not get bug fixes and new features unless you update the vendored headers.</p>
</div>
<div class="section level2">
<h2 id="getting-help">Getting help<a class="anchor" aria-label="anchor" href="#getting-help"></a>
</h2>
<p>Please open an issue or email me. I will do my best to respond before 48 hours.</p>
</div>
<div class="section level2">
<h2 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h2>
<p>Contributions are welcome! Please see the <a href="https://cpp4r.org/articles/15-internals.html">internals vignette</a> for details about design choices and coding style.</p>
</div>
<div class="section level2">
<h2 id="code-of-conduct">Code of Conduct<a class="anchor" aria-label="anchor" href="#code-of-conduct"></a>
</h2>
<p>Please note that the cpp4r project is released with a <a href="https://cpp4r.org/CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/pachadotdev/cpp4r/">Browse source code</a></li>
<li><a href="https://github.com/pachadotdev/cpp4r/issues">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>Apache License (&gt;= 2)</small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
<li><a href="SUPPORT.html">Getting help</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing cpp4r</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Mauricio Vargas Sepulveda <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-1017-7574" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li> Posit Software, PBC <br><small class="roles"> Author </small>   </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="Lifecycle: stable"></a></li>
<li><a href="https://github.com/pachadotdev/cpp4r/actions/workflows/R-CMD-check.yaml"><img src="https://github.com/pachadotdev/cpp4r/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://CRAN.R-project.org/package=cpp4r"><img src="https://www.r-pkg.org/badges/version/cpp4r" alt="CRAN status"></a></li>
<li><a href="https://github.com/pachadotdev/cpp4r/actions/workflows/test-coverage.yaml"><img src="https://raw.githubusercontent.com/pachadotdev/cpp4r/main/badges/coverage.svg" alt="Test coverage"></a></li>
<li><a href="https://buymeacoffee.com/pacha"><img src="https://raw.githubusercontent.com/pachadotdev/buymeacoffee-badges/main/bmc-yellow.svg" alt="BuyMeACoffee"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mauricio Vargas Sepulveda, Posit Software, PBC.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
